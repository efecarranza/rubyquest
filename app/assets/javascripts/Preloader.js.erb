RubyQuest.Preloader = function(game) {
	this.preloadBar = null;
	this.titleText = null;
	this.ready = false;
};

RubyQuest.Preloader.prototype = {

	preload: function() {
		this.preloadBar = this.add.sprite(this.world.centerX, this.world.centerY, 'preloadBar');
		this.preloadBar.anchor.setTo(0.5,0.5);
		this.load.setPreloadSprite(this.preloadBar);
		this.add.text(this.world.centerX-60, this.world.centerY+40, "loading...", { font: "35px Arial", fill: "#fff", align: "center" });
		this.load.image('map', '<%= asset_path('rq4-bottom.png') %>');
		this.load.image('map2', '<%= asset_path('rq4-top.png') %>');
		this.load.spritesheet('hero', '<%= asset_path('walk.png') %>', 63, 62);
		this.load.spritesheet('herobw', '<%= asset_path('walkbw.png') %>', 63, 62);
		this.load.spritesheet('herofight', '<%= asset_path('herofight.png') %>', 190, 104);
		this.load.image('monster', '<%= asset_path('monster.png') %>');
		this.load.image('battlebg', '<%= asset_path('battlebackground.png') %>');
		this.load.spritesheet('logo', '<%= asset_path('rubyquestlogo.png') %>', 178, 197);
		this.load.image('label', '<%= asset_path('label.png') %>');
		this.load.spritesheet('ed', '<%= asset_path('eddroid.png') %>', 53, 49);
		this.load.image('red_bar', '<%= asset_path('red_bar.png') %>');
		this.load.image('black_bar', '<%= asset_path('black_bar.png') %>');
		this.load.image('yellow_bar', '<%= asset_path('green_bar.png') %>');
		this.load.image('ruby', '<%= asset_path('ruby.png') %>');
		this.load.image('rubyshard', '<%= asset_path('dreamparticle.png') %>');
		this.load.image('cat', '<%= asset_path('cat.png') %>');
		this.load.spritesheet('snakemonster', '<%= asset_path('snakemonster.png') %>', 94, 78);
		this.load.image('logopixel', '<%= asset_path('RQlogopixeled.png') %>');
		this.load.image('black', '<%= asset_path('black.png') %>');
		this.load.tilemap('rq4map', '<%= asset_path('rq4-blocking.json') %>', null, Phaser.Tilemap.TILED_JSON);
		this.load.image('hole', '<%= asset_path('hole.png') %>');
		this.load.spritesheet('fireball', '<%= asset_path('firelion2.png') %>', 128, 128);
		this.load.image('house', '<%= asset_path('indoor1.png') %>');
		this.load.image('housetop', '<%= asset_path('indoor1-top.png') %>');
		this.load.tilemap('houseblock', '<%= asset_path('indoor1-blocking.json') %>', null, Phaser.Tilemap.TILED_JSON);
		this.load.spritesheet('father', '<%= asset_path('father.png') %>', 63, 62);
		this.load.spritesheet('snakebite', '<%= asset_path('snakebite2.png') %>', 128, 128);
		this.load.spritesheet('evilwizard', '<%= asset_path('evilwizard.png') %>', 64, 47);

		},

		create: function() {
			this.preloadBar.cropEnabled = false;
		},

		update: function() {
			this.ready = true;
			this.state.start('StartMenu');
		}

	};
